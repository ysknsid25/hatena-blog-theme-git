<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
    </head>
    <body>
        <div class="float-btn-group">
            <span class="bookmark-float-item">
                <a
                    href="https://b.hatena.ne.jp/entry/"
                    class="hatena-bookmark-button"
                    data-hatena-bookmark-layout="touch-counter"
                    title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ "
                >
                    <img
                        src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png"
                        alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ "
                        width="20"
                        height="20"
                        style="border: none"
                    />
                </a>
            </span>
            <a
                href="https://blog.hatena.ne.jp/ysknsid25/karanohako.hatenablog.jp/subscribe?utm_source=blogs_entry_footer&utm_campaign=subscribe_blog&utm_medium=button&utm_content=float"
                class="subscribe-float-btn"
            >
                èª­è€…ã«ãªã‚Šã¾ã›ã‚“ã‹ï¼ŸğŸ‘€
            </a>
        </div>
        <script
            type="text/javascript"
            src="https://b.st-hatena.com/js/bookmark_button.js"
            charset="utf-8"
            async="async"
        ></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const targets = document.querySelectorAll(
                    '[name="subscribe-original"], .hatena-module-profile, .hatena-module-category, .hatena-module-archive, .hatena-module-links, .hatena-module-recent-entries',
                );
                const group = document.querySelector(".float-btn-group");
                const bookmarkItem = document.querySelector(
                    ".bookmark-float-item",
                );
                const visibleElements = new Set();

                const isEntryPage =
                    document.querySelectorAll(".entry").length === 1;

                if (bookmarkItem && isEntryPage) {
                    bookmarkItem.classList.add("entry-visible");
                }

                const showButtons = () => group?.classList.add("visible");
                const hideButtons = () => group?.classList.remove("visible");

                if (targets.length > 0 && group) {
                    const observer = new IntersectionObserver(
                        (entries) => {
                            entries.forEach((entry) => {
                                if (entry.isIntersecting) {
                                    visibleElements.add(entry.target);
                                } else {
                                    visibleElements.delete(entry.target);
                                }
                            });

                            if (visibleElements.size > 0) {
                                hideButtons();
                            } else {
                                showButtons();
                            }
                        },
                        { threshold: 0 },
                    );

                    targets.forEach((el) => observer.observe(el));
                } else if (group) {
                    showButtons();
                }
            });
        </script>
    </body>
</html>
