<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
    </head>
    <body>
        <a
            href="https://blog.hatena.ne.jp/ysknsid25/karanohako.hatenablog.jp/subscribe?utm_source=blogs_entry_footer&utm_campaign=subscribe_blog&utm_medium=button&utm_content=float"
            class="subscribe-float-btn"
        >
            ç„¡æ–™ã§è³¼èª­ã—ã¾ã›ã‚“ã‹ï¼ŸğŸ‘€
        </a>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const targets = document.querySelectorAll(
                    '[name="subscribe-original"], .hatena-module-profile, .hatena-module-category, .hatena-module-archive, .hatena-module-links',
                );
                const floatBtn = document.querySelector(".subscribe-float-btn");
                const visibleElements = new Set();

                if (targets.length > 0 && floatBtn) {
                    const observer = new IntersectionObserver(
                        (entries) => {
                            entries.forEach((entry) => {
                                if (entry.isIntersecting) {
                                    visibleElements.add(entry.target);
                                } else {
                                    visibleElements.delete(entry.target);
                                }
                            });

                            if (visibleElements.size > 0) {
                                floatBtn.classList.remove("visible");
                            } else {
                                floatBtn.classList.add("visible");
                            }
                        },
                        { threshold: 0 },
                    );

                    targets.forEach((el) => observer.observe(el));
                } else if (floatBtn) {
                    floatBtn.classList.add("visible");
                }
            });
        </script>
    </body>
</html>
